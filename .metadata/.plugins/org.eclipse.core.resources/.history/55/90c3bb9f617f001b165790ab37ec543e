/**
 * 
 */
package com.Ratioform.pages;


import java.util.List;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;


/**
 * @author Sowndarya
 *
 */
public class SearchPage {
	WebDriver driver;

	By searchbox=By.xpath("(//input[@name='searchQuery'])[1]");
	By searchbutton=By.xpath("(//span[@class='search-text'])[1]");
	By searchtext=By.xpath("//div[@class='heading-wrapper']/h1[text()='Ergebnisse für \"wellpapp\"']");
	By searchsuggestion=By.xpath("(//div[@class='suggestion-product']/a)[1]");
	By searchsuggestion1=By.xpath("(//span[@class='suggestion-product__name'])[1]");
	By ordertable=By.xpath("//a[contains(text(),'Zur Bestelltabelle')]");
	By invalidsearch=By.xpath("//span[@id='search-result-count']");
	By partialsearch=By.xpath("//div[@class='heading-wrapper']//h1");
	
	public SearchPage(WebDriver driver) 
	{
		this.driver=driver;
	}


	public Boolean searchProductselect(String Productname) throws InterruptedException 
	{
		driver.findElement(searchbox).sendKeys(Productname);
		Thread.sleep(4000);
		// Javascript executor class with executeScript method
		JavascriptExecutor j = (JavascriptExecutor) driver;
		// identify element and set value
		WebElement element = driver.findElement(searchsuggestion);
		j.executeScript("arguments[0].click();", element);
		Thread.sleep(3000);
		Boolean orderdetails = driver.findElement(ordertable).isDisplayed();	
		return orderdetails;

	}

	public void searchProduct(String Productname) throws InterruptedException 
	{
		driver.findElement(searchbox).sendKeys(Productname);

	}
	public String partialSearch( ) throws InterruptedException 
	{
		String partialtext=driver.findElement(partialsearch).getText();
		return partialtext;
	}
	public String searchinvalidProduct(String Productname) throws InterruptedException 
	{
		driver.findElement(searchbox).sendKeys(Productname);
		driver.findElement(searchbutton).click();
		Thread.sleep(4000);
		String searchdata = driver.findElement(invalidsearch).getText();	
		return searchdata;

	}

	public Boolean searchBox() 
	{
		Boolean searchboxdisplayed=driver.findElement(searchbox).isDisplayed();
		return searchboxdisplayed;
	} 



	public void ClickSearchButton() 
	{
		driver.findElement(searchbutton).click();

	}

	public Boolean verifysearchtext() {

		driver.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS);
		Boolean searchtextdisplayed =driver.findElement(searchtext).isDisplayed();
		return searchtextdisplayed;

	}



	//	public String Suggestion(String Productname) throws InterruptedException 
	//	{
	//		driver.findElement(searchbox).sendKeys(Productname);
	//		Thread.sleep(3000);
	//	      WebElement element = driver.findElement(searchsuggestion1);
	//	      String text=element.getText();
	//	      JavascriptExecutor j = (JavascriptExecutor) driver;
	//	     // String script = "return document.By.xpath(\"(//span[@class='suggestion-product__name'])[1]\").innerHTML";
	//	      String el= element.getAttribute("Wellpapp-Faltkartons, Länge ab 800");
	//	      String script=  (String) j.executeScript("return document.evaluate('(//span[@class='suggestion-product__name'])[1]' ,document.body, null, XPathResult.ANY_TYPE, null)");
	//	      
	////	      String script = "return   document.getElementByXPath(\"(//span[@class='suggestion-product__name'])[1]\").getText();";
	////	      String text = ((JavascriptExecutor) driver).executeScript(script).toString();
	//	    		  //j.executeScript("arguments[0].click();", element);
	//	     // String text=j.executeScript("return arguments[0].text", element);
	//	     
	//	      //String text = (String) j.executeScript("return arguments[0].text",element);
	//	    		// String el= element.getAttribute("wellpapp");
	//	    		// String n=(String) j.executeScript("return document.getElementById('hidden_div').value;");
	//	    		// System.out.println(n);
	//	    		  Thread.sleep(3000);
	//	    			System.out.println("Auto Suggest List ::" +script);
	//	    		return el;
	//	}

}
